[{"age": null, "album": "", "artist": null, "bookmarked": false, "comments": [], "date_published": "2024-11-09T08:00:00+00:00", "description": "<p><span>\n\nIn my bioinformatics work I often stream files between linux hosts and\nAmazon S3.  This could look like:\n\n</span>\n\n<p>\n\n</p>\n\n<pre>\n$ scp host:/path/to/file /dev/stdout | \\\n    aws s3 cp - s3://bucket/path/to/file\n</pre>\n\n\n\n<p>\n\nThis recently stopped working after upgrading:\n\n</p>\n\n<p>\n\n</p>\n\n<pre>\nftruncate \"/dev/stdout\": Invalid argument\nCouldn't write to \"/dev/stdout\": Illegal seek\n</pre>\n\n\n\n<p>\n\nI think I figured out why this is happening:\n\n</p>\n\n<p>\n\n</p>\n\n<ul>\n\n<li><p>New versions of <code>scp</code> use the SFTP protocol instead of\nthe SCP protocol. [1]\n\n</p></li>\n<li><p>SFTP <a href=\"https://superuser.com/questions/1637963/get-file-via-sftp-to-stdout\">may\nnot download sequentially</a>\n\n</p></li>\n</ul>\n\n\n\n<p>\n\nWith <code>scp</code> I can give the <code>-O</code> flag:\n\n</p>\n\n<p>\n\n</p>\n\n<blockquote>\n Use the legacy SCP protocol for file transfers instead of the SFTP\n protocol.  Forcing the use of the SCP protocol may be necessary for\n servers that do not implement SF", "id": 1483925, "language": "en-US", "link": "https://www.jefftk.com/p/force-sequential-output-with-scp", "manual_status_code": 0, "page_rating": 27, "page_rating_contents": 86, "page_rating_visits": 0, "page_rating_votes": 0, "permanent": false, "source__id": 163, "source_url": "https://www.jefftk.com/news.rss", "status_code": 0, "tags": [], "thumbnail": null, "title": "Force Sequential Output with SCP?", "vote": 0}]